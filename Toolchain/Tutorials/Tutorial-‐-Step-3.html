<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Toolchain/Tutorials/Tutorial-‚Äê-Step-3" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Step 3: Adding Interactions | SIMPLE project documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://avatars.githubusercontent.com/u/137744200"><meta data-rh="true" name="twitter:image" content="https://avatars.githubusercontent.com/u/137744200"><meta data-rh="true" property="og:url" content="https://doc.project-simple.eu/Toolchain/Tutorials/Tutorial-‚Äê-Step-3"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Step 3: Adding Interactions | SIMPLE project documentation"><meta data-rh="true" name="description" content="üéØ Objectives"><meta data-rh="true" property="og:description" content="üéØ Objectives"><link data-rh="true" rel="icon" href="https://avatars.githubusercontent.com/u/137744200"><link data-rh="true" rel="canonical" href="https://doc.project-simple.eu/Toolchain/Tutorials/Tutorial-‚Äê-Step-3"><link data-rh="true" rel="alternate" href="https://doc.project-simple.eu/Toolchain/Tutorials/Tutorial-‚Äê-Step-3" hreflang="en"><link data-rh="true" rel="alternate" href="https://doc.project-simple.eu/Toolchain/Tutorials/Tutorial-‚Äê-Step-3" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"SIMPLE SDK","item":"https://doc.project-simple.eu/category/simple-sdk"},{"@type":"ListItem","position":2,"name":"Step 3: Adding Interactions","item":"https://doc.project-simple.eu/Toolchain/Tutorials/Tutorial-‚Äê-Step-3"}]}</script><link rel="preconnect" href="https://doc-project-simple.goatcounter.com">
<script async src="//gc.zgo.at/count.js" data-goatcounter="https://doc-project-simple.goatcounter.com/count"></script>

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.4.2/css/all.css"><link rel="stylesheet" href="/assets/css/styles.732d59af.css">
<script src="/assets/js/runtime~main.b37a30b1.js" defer="defer"></script>
<script src="/assets/js/main.72a04910.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||"light"),document.documentElement.setAttribute("data-theme-choice",t||"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="https://avatars.githubusercontent.com/u/137744200" alt="SIMPLE Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="https://avatars.githubusercontent.com/u/137744200" alt="SIMPLE Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">SIMPLE documentation</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Documentation</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/project-SIMPLE" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><i class="fab fa-github" style="font-size: 24px;"></i></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/"><span title="Welcome to SIMPLE" class="linkLabel_WmDU">Welcome to SIMPLE</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/category/getting-started"><span title="Getting Started" class="categoryLinkLabel_W154">Getting Started</span></a><button aria-label="Expand sidebar category &#x27;Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/category/virtual-universes"><span title="Virtual Universes" class="categoryLinkLabel_W154">Virtual Universes</span></a><button aria-label="Expand sidebar category &#x27;Virtual Universes&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/category/technical"><span title="Technical" class="categoryLinkLabel_W154">Technical</span></a><button aria-label="Expand sidebar category &#x27;Technical&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/category/simple-sdk"><span title="SIMPLE SDK" class="categoryLinkLabel_W154">SIMPLE SDK</span></a><button aria-label="Collapse sidebar category &#x27;SIMPLE SDK&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Toolchain/Home"><span title="Home" class="linkLabel_WmDU">Home</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/Toolchain/SimpleTools/SimpleTools"><span title="SimpleTools" class="categoryLinkLabel_W154">SimpleTools</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/Toolchain/Recipes/Running-a-model-game"><span title="Recipes" class="categoryLinkLabel_W154">Recipes</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/Toolchain/Tutorials/Tutorials"><span title="Tutorials" class="categoryLinkLabel_W154">Tutorials</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Toolchain/Tutorials/Tutorials"><span title="Tutorials" class="linkLabel_WmDU">Tutorials</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Toolchain/Tutorials/Tutorial-‚Äê-From-GAMA-model-to-Virtual-Universe-‚Äê-case-of-a-traffic-model"><span title="From GAMA model to Virtual Universe ‚Äê case of a traffic model" class="linkLabel_WmDU">From GAMA model to Virtual Universe ‚Äê case of a traffic model</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Toolchain/Tutorials/Tutorial-‚Äê-Step-1"><span title="Step 1: Generation of the GAMA VR model" class="linkLabel_WmDU">Step 1: Generation of the GAMA VR model</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Toolchain/Tutorials/Tutorial-‚Äê-Step-2"><span title="Step 2: Creation of the Unity basic game" class="linkLabel_WmDU">Step 2: Creation of the Unity basic game</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Toolchain/Tutorials/Tutorial-‚Äê-Step-3"><span title="Step 3: Adding Interactions" class="linkLabel_WmDU">Step 3: Adding Interactions</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Toolchain/Unity-Installation-Guide"><span title="Installation Guide: Unity &amp; Development Environment" class="linkLabel_WmDU">Installation Guide: Unity &amp; Development Environment</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Toolchain/Unity‚ÄêInterface‚ÄêBasics"><span title="üñ•Ô∏è Unity Interface &amp; Navigation Basics" class="linkLabel_WmDU">üñ•Ô∏è Unity Interface &amp; Navigation Basics</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/category/projects-tools"><span title="Projects tools" class="categoryLinkLabel_W154">Projects tools</span></a><button aria-label="Expand sidebar category &#x27;Projects tools&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/category/demo"><span title="Demo" class="categoryLinkLabel_W154">Demo</span></a><button aria-label="Expand sidebar category &#x27;Demo&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/category/simple-sdk"><span>SIMPLE SDK</span></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Tutorials</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Step 3: Adding Interactions</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Step 3: Adding Interactions</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="-objectives">üéØ Objectives<a href="#-objectives" class="hash-link" aria-label="Direct link to üéØ Objectives" title="Direct link to üéØ Objectives" translate="no">‚Äã</a></h2>
<p>The aim of this step is to enable simple interactions from the VR headset.</p>
<ul>
<li class=""><strong>Main Interaction:</strong> Block specific roads by selecting them with the interaction ray.</li>
<li class=""><strong>Visual Feedback:</strong> Change road colors based on selection and hover states.</li>
<li class=""><strong>Advanced Usage:</strong> Understand how to map specific controller buttons to custom scripts (e.g., changing brightness).</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-gama-model-modifications">1. GAMA Model Modifications<a href="#1-gama-model-modifications" class="hash-link" aria-label="Direct link to 1. GAMA Model Modifications" title="Direct link to 1. GAMA Model Modifications" translate="no">‚Äã</a></h2>
<p>First, we must update the GAMA model to support the &quot;blocked&quot; state and handle commands sent from Unity.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="a-update-traffic-and-pollutiongaml">A. Update <code>Traffic and Pollution.gaml</code><a href="#a-update-traffic-and-pollutiongaml" class="hash-link" aria-label="Direct link to a-update-traffic-and-pollutiongaml" title="Direct link to a-update-traffic-and-pollutiongaml" translate="no">‚Äã</a></h3>
<p>We need to add a <code>blocked</code> attribute to the roads and update their visual aspect.</p>
<ol>
<li class="">Open <strong>Traffic and Pollution.gaml</strong>.</li>
<li class="">Update the <strong>road species</strong> as follows:</li>
</ol>
<div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">species road {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ... existing attributes ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bool blocked &lt;- false;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aspect default {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // Roads turn red if blocked, white otherwise</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        draw (shape + 5) color: blocked ? #red : #white;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="https://github.com/user-attachments/assets/2b5a2e04-80cc-4e81-83d0-195a65573437" alt="TutorialGAMARoad" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="b-update-traffic-logic">B. Update Traffic Logic<a href="#b-update-traffic-logic" class="hash-link" aria-label="Direct link to B. Update Traffic Logic" title="Direct link to B. Update Traffic Logic" translate="no">‚Äã</a></h3>
<p><strong>File</strong>: <code>Traffic and Pollution.gaml</code>(Global Section)</p>
<p>To ensure cars intelligently avoid blocked roads, we need to modify the <strong>weight</strong> (cost) associated with each road in the simulation&#x27;s network. By applying a massive multiplier to blocked roads, the pathfinding algorithm will naturally redirect traffic to alternative routes.</p>
<p>Add or update the following reflex in your global section:</p>
<div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">// Reflex to update the speed of the roads according to the weights</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">reflex update_road_speed {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // If blocked, weight is multiplied by 100,000, effectively making it impassable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    road_weights &lt;- road as_map (each::(each.shape.perimeter / each.speed_coeff * (each.blocked ? 100000.0 : 1.0)));</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    road_network &lt;- road_network with_weights road_weights;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>‚ÑπÔ∏è This logic uses a conditional operator (<code>condition ? true_value : false_value</code>). If blocked is true, it applies the <code>100,000</code> multiplier; otherwise, it keeps the original weight.</p>
<p><img decoding="async" loading="lazy" src="https://github.com/user-attachments/assets/bd7460c4-3f1d-480e-8773-c9ebd3e5eec8" alt="TutorialGAMAGlobal" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="c-enable-live-updates">C. Enable Live Updates<a href="#c-enable-live-updates" class="hash-link" aria-label="Direct link to C. Enable Live Updates" title="Direct link to C. Enable Live Updates" translate="no">‚Äã</a></h3>
<p><strong>File</strong>: Traffic and Pollution.gaml (Experiment Section)</p>
<p>To visualize the color change in GAMA&#x27;s display, we must enable the refresh rate for the road species.</p>
<p>Find the line <code>species road refresh: false;</code> and change it to <code>species road refresh: true;</code>.</p>
<p><img decoding="async" loading="lazy" src="https://github.com/user-attachments/assets/e3b2beac-213e-496b-aa69-818267e4c954" alt="TutorialGAMADisplay" class="img_ev3q"></p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="d-update-traffic-and-pollution-vrgaml">D. Update Traffic and Pollution-VR.gaml<a href="#d-update-traffic-and-pollution-vrgaml" class="hash-link" aria-label="Direct link to D. Update Traffic and Pollution-VR.gaml" title="Direct link to D. Update Traffic and Pollution-VR.gaml" translate="no">‚Äã</a></h3>
<p>We need to add an action that Unity will trigger to toggle the blocked state.</p>
<div class="language-gaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-gaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">    // Map to link road names to their agents</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    map&lt;string,road&gt; roads &lt;- road as_map (each.name :: each);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    action block_road(string id) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        road b &lt;- roads[id];</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (b != nil) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ask b {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                // Toggle blocked state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                blocked &lt;- !blocked;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span></code></pre></div></div>
<p><img decoding="async" loading="lazy" src="https://github.com/user-attachments/assets/67e61064-cbaa-4ed2-8864-77e7b511e67e" alt="TutorialGAMAUnityLinker" class="img_ev3q"></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-unity-project-modifications">2. Unity Project Modifications<a href="#2-unity-project-modifications" class="hash-link" aria-label="Direct link to 2. Unity Project Modifications" title="Direct link to 2. Unity Project Modifications" translate="no">‚Äã</a></h2>
<p>Now, let&#x27;s configure Unity to interact with these new GAMA features.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="a-extend-interaction-distance">A. Extend Interaction Distance<a href="#a-extend-interaction-distance" class="hash-link" aria-label="Direct link to A. Extend Interaction Distance" title="Direct link to A. Extend Interaction Distance" translate="no">‚Äã</a></h3>
<p>Since we are in &quot;Sky View,&quot; the default interaction ray might be too short to reach the roads.</p>
<ol>
<li class="">In the <strong>Hierarchy</strong>, select: <code>SkyViewPlayer</code> &gt; <code>Camera Offset</code> &gt; <code>Right Controller</code> &gt; <code>Near-Far Interactor</code>.</li>
<li class="">In the <strong>Inspector</strong>, find the <strong>Curve Interaction Caster</strong> component.</li>
<li class="">Under <strong>Curve Casting Settings</strong>, set <strong>Cast Distance</strong> to <code>1000</code>.</li>
</ol>
<img width="1138" alt="CastDist" src="https://github.com/user-attachments/assets/4d05f6e7-9d5c-4eb8-8b6f-d0fe22b2e439">
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="b-programming-the-interaction">B. Programming the Interaction<a href="#b-programming-the-interaction" class="hash-link" aria-label="Direct link to B. Programming the Interaction" title="Direct link to B. Programming the Interaction" translate="no">‚Äã</a></h3>
<p>We need to modify the C# script that handles what happens when the ray hits an object.</p>
<p><strong>How to open the code:</strong>
You have two ways to access the script:</p>
<p><strong>1. Via Inspector:</strong></p>
<ul>
<li class="">Select the Manager (or Game Manager) object in the Hierarchy.</li>
<li class="">In the Inspector, locate the <strong>Simulation Manager Interaction</strong> component.</li>
<li class=""><strong>Double-click</strong> on the Script field (where it says <code>SimulationManagerInteraction.cs</code>).</li>
</ul>
<img width="1550" alt="Capture d‚ÄôeÃÅcran 2026-02-13 aÃÄ 13 40 36" src="https://github.com/user-attachments/assets/1be072d7-78e8-4275-a33e-8c7c0683fdee">
<p><strong>2. Via Project Window( Alternative):</strong></p>
<ul>
<li class="">In the <strong>Unity Project Window</strong> (bottom panel), navigate to the folder: <code>Assets</code> &gt; <code>Scripts</code> &gt; <code>Gama Provider</code>.</li>
<li class=""><strong>Double-click</strong> the script: <code>SimulationManagerInteraction.cs</code>.</li>
</ul>
<p>Unity opens Visual Studio, allowing you to edit the script.</p>
<img width="1840" alt="Capture d‚ÄôeÃÅcran 2026-02-13 aÃÄ 13 40 52" src="https://github.com/user-attachments/assets/ae76f090-7bcc-4aba-9692-08bd65addb3d">
<p><strong>Modify the following three methods inside the script:</strong></p>
<p><strong>1. Hover Enter (Pointer enters the road)</strong></p>
<p><strong>Description:</strong>
This method triggers when the VR pointer <strong>starts touching</strong> an object. It provides immediate visual feedback to the user.</p>
<ul>
<li class="">It checks if the object is tagged as a <code>&quot;road&quot;</code>.</li>
<li class="">It changes the color to <strong>Blue</strong> to indicate interaction is possible.</li>
</ul>
<div class="language-C# language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">protected override void HoverEnterInteraction(HoverEnterEventArgs ev)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GameObject obj = ev.interactableObject.transform.gameObject;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (obj.tag.Equals(&quot;road&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ChangeColor(obj, Color.blue); // Visual feedback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>2. Hover Exit (Pointer leaves the road)</strong></p>
<p><strong>Description:</strong>
This method triggers when the VR pointer <strong>leaves</strong> the object. It resets the color based on the object&#x27;s logic state.</p>
<ul>
<li class="">It checks if the road is currently in the <code>SelectedObjects</code> list (meaning it is blocked).</li>
<li class="">If <strong>Selected (Blocked)</strong>: It turns <strong>Red</strong>.</li>
<li class="">If <strong>Not Selected (Free)</strong>: It reverts to default <strong>Gray</strong>.</li>
</ul>
<div class="language-C# language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">protected override void HoverExitInteraction(HoverExitEventArgs ev)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    GameObject obj = ev.interactableObject.transform.gameObject;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (obj.tag.Equals(&quot;road&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        bool isSelected = SelectedObjects.Contains(obj);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ChangeColor(obj, isSelected ? Color.red : Color.gray);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>3. Select Interaction (Clicking the Trigger)</strong></p>
<p><strong>Description:</strong>
This method triggers when the user presses the <strong>Trigger button</strong> while pointing at an object. It handles the main logic.</p>
<ul>
<li class=""><strong>Cooldown:</strong> Checks <code>remainingTime</code> to prevent accidental double-clicks.</li>
<li class=""><strong>GAMA Communication:</strong> Asks GAMA to trigger the <code>block_road</code> action with the road&#x27;s ID.</li>
<li class=""><strong>Local State:</strong> Toggles the road&#x27;s status in the <code>SelectedObjects</code> list and updates the color immediately.</li>
</ul>
<div class="language-C# language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">protected override void SelectInteraction(SelectEnterEventArgs ev)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    if (remainingTime &lt;= 0.0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        GameObject obj = ev.interactableObject.transform.gameObject;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        if (obj.tag.Equals(&quot;road&quot;))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            Dictionary&lt;string, string&gt; args = new Dictionary&lt;string, string&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {&quot;id&quot;, obj.name }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            };</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Trigger the GAMA action</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ConnectionManager.Instance.SendExecutableAsk(&quot;block_road&quot;, args);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            // Toggle selection state and color in Unity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            bool newSelection = !SelectedObjects.Contains(obj);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            if (newSelection) SelectedObjects.Add(obj);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            else SelectedObjects.Remove(obj);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ChangeColor(obj, newSelection ? Color.red : Color.gray);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            remainingTime = timeWithoutInteraction; // 1s cooldown</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-advanced-custom-controller-buttons">3. Advanced: Custom Controller Buttons<a href="#3-advanced-custom-controller-buttons" class="hash-link" aria-label="Direct link to 3. Advanced: Custom Controller Buttons" title="Direct link to 3. Advanced: Custom Controller Buttons" translate="no">‚Äã</a></h3>
<p><em>(Informational only - not required for the main tutorial)</em></p>
<p>To map a specific physical button (like the &quot;A&quot; or &quot;X&quot; button) to an action:</p>
<ol>
<li class=""><strong>Define the Action</strong>: Double-click <code>Assets/Samples/XR Interaction Toolkit/[Version]/Starter Assets/XRI</code> Default Input Actions.</li>
<li class=""><strong>Add Binding</strong>: In <code>XRI RightHand Interaction</code>, add a new action (e.g., &quot;Main Button&quot;) and bind it to the controller&#x27;s primary button.</li>
<li class=""><strong>Reference in Script</strong>: Use <code>[SerializeField] private InputActionReference primaryRightHandButton;</code> in your script.</li>
<li class=""><strong>Link in Inspector</strong>: Drag the Input Action into the corresponding field on your <strong>Game Manager</strong> object.</li>
<li class=""><strong>Detect Press</strong>:</li>
</ol>
<div class="language-C# language-c# codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c# codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">if (primaryRightHandButton != null &amp;&amp; primaryRightHandButton.action.triggered) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    TriggerMainButton(); // Your custom function here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/project-SIMPLE/documentation/tree/main/docs/Toolchain/10-Tutorials/05-Tutorial-‚Äê-Step-3.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Toolchain/Tutorials/Tutorial-‚Äê-Step-2"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Step 2: Creation of the Unity basic game</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Toolchain/Unity-Installation-Guide"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Installation Guide: Unity &amp; Development Environment</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-objectives" class="table-of-contents__link toc-highlight">üéØ Objectives</a></li><li><a href="#1-gama-model-modifications" class="table-of-contents__link toc-highlight">1. GAMA Model Modifications</a><ul><li><a href="#a-update-traffic-and-pollutiongaml" class="table-of-contents__link toc-highlight">A. Update <code>Traffic and Pollution.gaml</code></a></li><li><a href="#b-update-traffic-logic" class="table-of-contents__link toc-highlight">B. Update Traffic Logic</a></li><li><a href="#c-enable-live-updates" class="table-of-contents__link toc-highlight">C. Enable Live Updates</a></li><li><a href="#d-update-traffic-and-pollution-vrgaml" class="table-of-contents__link toc-highlight">D. Update Traffic and Pollution-VR.gaml</a></li></ul></li><li><a href="#2-unity-project-modifications" class="table-of-contents__link toc-highlight">2. Unity Project Modifications</a><ul><li><a href="#a-extend-interaction-distance" class="table-of-contents__link toc-highlight">A. Extend Interaction Distance</a></li><li><a href="#b-programming-the-interaction" class="table-of-contents__link toc-highlight">B. Programming the Interaction</a></li><li><a href="#3-advanced-custom-controller-buttons" class="table-of-contents__link toc-highlight">3. Advanced: Custom Controller Buttons</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Sponsor</div><ul class="footer__items clean-list"><li class="footer__item">
                    <p>
                      This SIMPLE website was created and maintained with the financial support of the European Union. Its contents are the sole responsibility of SIMPLE and do not necessarily reflect the views of the European Union.
                    </p>
                  </li><li class="footer__item">
                    <img src="/img/EU_POS.png">
                  </li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Licence</div><ul class="footer__items clean-list"><li class="footer__item">
                    <p>
                      Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.3 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
                    </p>
                  </li><li class="footer__item">
                    <p>A copy of the license is included <a href="https://github.com/project-SIMPLE/documentation/blob/main/LICENSE" style="display:initial">here</a>, in the repository of the wiki content.</p>
                  </li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2026 Project SIMPLE, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>