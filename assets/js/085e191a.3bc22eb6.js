"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[3265],{7453(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>s,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"Toolchain/Recipes/Running-a-model-game","title":"Preamble","description":"In what follows, we assume that the user has a GAMA model adapted to VR and a Unity project with at least one scene containing the prefabs needed to connect to GAMA. See the tutorial for more information on designing this GAMA model and the Unity project.","source":"@site/docs/Toolchain/04-Recipes/01-Running-a-model-game.md","sourceDirName":"Toolchain/04-Recipes","slug":"/Toolchain/Recipes/Running-a-model-game","permalink":"/Toolchain/Recipes/Running-a-model-game","draft":false,"unlisted":false,"editUrl":"https://github.com/project-SIMPLE/documentation/tree/main/docs/Toolchain/04-Recipes/01-Running-a-model-game.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"docSidebar","previous":{"title":"Exporting Data from Unity","permalink":"/Toolchain/SimpleTools/Export-Data-from-Unity"},"next":{"title":"Debugging","permalink":"/Toolchain/Recipes/Debugging"}}');var o=t(4848),a=t(8453);const s={},r="Preamble",l={},c=[{value:"From Unity",id:"from-unity",level:2},{value:"VR Player Simulation in Play Mode (Unity)",id:"vr-player-simulation-in-play-mode-unity",level:4},{value:"Setup",id:"setup",level:5},{value:"Configuration",id:"configuration",level:5},{value:"Controls (Play Mode)",id:"controls-play-mode",level:5},{value:"\u26a0\ufe0f Important Notice",id:"\ufe0f-important-notice",level:5},{value:"From a headset",id:"from-a-headset",level:2}];function d(e){const n={a:"a",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h4:"h4",h5:"h5",header:"header",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"preamble",children:"Preamble"})}),"\n",(0,o.jsxs)(n.p,{children:["In what follows, we assume that the user has a GAMA model adapted to VR and a Unity project with at least one scene containing the prefabs needed to connect to GAMA. See the ",(0,o.jsx)(n.a,{href:"https://github.com/project-SIMPLE/simple.toolchain/wiki/02-Tutorial-%E2%80%90-From-GAMA-model-to-Virtual-Universe-%E2%80%90-case-of-a-traffic-model",children:"tutorial"})," for more information on designing this GAMA model and the Unity project."]}),"\n",(0,o.jsx)(n.h1,{id:"general-information",children:"General information"}),"\n",(0,o.jsx)(n.p,{children:"The model can be launched in two different ways: from a headset or directly from Unity in Play mode.\nIn the following sections, we describe both options. In all cases, the middleware connected to GAMA must be running before starting the Unity application."}),"\n",(0,o.jsxs)(n.p,{children:["The middleware can be downloaded ",(0,o.jsx)(n.a,{href:"https://github.com/project-SIMPLE/simple.webplatform/archive/refs/heads/main.zip",children:"here"}),". All the information about the running of the middleware can be found in the ",(0,o.jsx)(n.a,{href:"https://github.com/project-SIMPLE/GamaServerMiddleware",children:"middleware wiki"}),"."]}),"\n",(0,o.jsx)(n.p,{children:"Note that when the SIMPLE tool generates a VR Gaml file, it also produces two additional files: settings.json, which contains information about the model to run and its execution conditions, and a .env file, which allows the modeler\u2019s workspace to be added to the middleware. For this second file (which is hidden in the project folder), the user must copy it into the middleware folder."}),"\n",(0,o.jsx)(n.h1,{id:"running-the-modelgame",children:"Running the model/game"}),"\n",(0,o.jsx)(n.h2,{id:"from-unity",children:"From Unity"}),"\n",(0,o.jsx)(n.p,{children:"To run the model/game from Unity, follow the following steps:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsx)(n.p,{children:"Run GAMA"}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:["Run the middleware: information about installing and running the middleware can be found ",(0,o.jsx)(n.a,{href:"https://github.com/project-SIMPLE/simple.webplatform?tab=readme-ov-file#getting-started-%EF%B8%8F",children:"here"})]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)("img",{width:"682",alt:"Capture d\u2019\xe9cran 2025-12-16 \xe0 13 43 35",src:"https://github.com/user-attachments/assets/c214e66f-8395-43dd-9d8c-20ae274c742f"}),"\n",(0,o.jsxs)(n.ol,{start:"3",children:["\n",(0,o.jsxs)(n.li,{children:["Open the page: ",(0,o.jsx)(n.a,{href:"http://localhost:8000/",children:"http://localhost:8000/"})]}),"\n",(0,o.jsx)(n.li,{children:"Choose the game in the middleware interface"}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:'For example, to run the game of the tutorial (Traffic_model-VR.gaml), click on "traffic_model_VR".'}),"\n",(0,o.jsx)("img",{width:"1454",alt:"Capture d\u2019e\u0301cran 2025-12-16 a\u0300 13 45 03",src:"https://github.com/user-attachments/assets/b2d72c71-565a-454d-81ac-2b1e6d3342c8"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"5. Push on the Unity Play button"})}),"\n",(0,o.jsx)(n.p,{children:'Open the Scene that you want to run (it has to contain a Connection Manager and a Game manager). For example, in linked to the model "Send Static data.gaml" we will open in the "UnityVRTemplate" the Scene "Scenes/Code Examples/Receive Static Data". Then, clicks on the Play button.'}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.img,{src:"https://github.com/user-attachments/assets/836a87b0-eef2-4d48-be25-397c0872c5a4",alt:"Unity - Play"})}),"\n",(0,o.jsx)(n.h4,{id:"vr-player-simulation-in-play-mode-unity",children:"VR Player Simulation in Play Mode (Unity)"}),"\n",(0,o.jsxs)(n.p,{children:["To simulate the behavior of a VR player directly in the Unity Editor when pressing ",(0,o.jsx)(n.strong,{children:"Play"}),", you can use the ",(0,o.jsx)(n.strong,{children:"XR Device Simulator"}),". This allows you to test movement and interactions without launching the game on a physical VR headset."]}),"\n",(0,o.jsx)(n.h5,{id:"setup",children:"Setup"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["In the ",(0,o.jsx)(n.strong,{children:"Project Explorer"}),", search for ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"simulator"})}),"."]}),"\n"]}),"\n",(0,o.jsx)("img",{width:"1250",alt:"Capture d\u2019e\u0301cran 2025-12-16 a\u0300 14 16 43",src:"https://github.com/user-attachments/assets/d9df7889-302f-4082-995f-e43318d7c019"}),"\n",(0,o.jsxs)(n.ol,{start:"2",children:["\n",(0,o.jsxs)(n.li,{children:["Locate the prefab named ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"XR Device Simulator"})}),"."]}),"\n",(0,o.jsx)(n.li,{children:"Drag and drop this prefab into your scene."}),"\n"]}),"\n",(0,o.jsx)("img",{width:"1250",alt:"Capture d\u2019e\u0301cran 2025-12-16 a\u0300 14 17 03",src:"https://github.com/user-attachments/assets/366e04c3-7c13-4b42-a50e-8aa87f362cba"}),"\n",(0,o.jsx)(n.h5,{id:"configuration",children:"Configuration"}),"\n",(0,o.jsxs)(n.p,{children:["The movement speed of the virtual player can be adjusted in the ",(0,o.jsx)(n.strong,{children:"XR Device Simulator"})," inspector:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Modify the variables ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"Keyboard X Translate Speed"})}),", ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"Keyboard Y Translate Speed"})}),", and ",(0,o.jsx)(n.strong,{children:(0,o.jsx)(n.code,{children:"Keyboard Z Translate Speed"})})," in ",(0,o.jsx)(n.em,{children:"Sensivity"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["For example, setting these values to ",(0,o.jsx)(n.strong,{children:"20"})," provides faster movement."]}),"\n",(0,o.jsx)("img",{width:"1250",alt:"Capture d\u2019\xe9cran 2025-12-16 \xe0 14 18 02",src:"https://github.com/user-attachments/assets/69d1b674-82e1-4df3-a653-d1bbbde3f7a5"}),"\n",(0,o.jsx)(n.h5,{id:"controls-play-mode",children:"Controls (Play Mode)"}),"\n",(0,o.jsx)(n.p,{children:"Once the game is running in Play Mode:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Movement (horizontal):"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"Z"})," / ",(0,o.jsx)(n.code,{children:"S"})," \u2192 forward / backward"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"Q"})," / ",(0,o.jsx)(n.code,{children:"D"})," \u2192 left / right"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Vertical movement:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"A"})," / ",(0,o.jsx)(n.code,{children:"E"})," \u2192 down / up"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Head movement:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Use the ",(0,o.jsx)(n.strong,{children:"mouse"})," to rotate the head (look around)"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Right controller simulation:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Press ",(0,o.jsx)(n.code,{children:"Y"})," to select the right controller"]}),"\n",(0,o.jsxs)(n.li,{children:["Press ",(0,o.jsx)(n.code,{children:"G"})," to activate the trigger"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h5,{id:"\ufe0f-important-notice",children:"\u26a0\ufe0f Important Notice"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Do not keep the XR Device Simulator in the scene when building the game for a real VR headset."}),(0,o.jsx)(n.br,{}),"\n","The simulator is intended ",(0,o.jsx)(n.strong,{children:"only for editor testing"})," and must be removed before compiling a VR build."]}),"\n",(0,o.jsx)(n.h2,{id:"from-a-headset",children:"From a headset"}),"\n",(0,o.jsx)(n.p,{children:"Connecting a headset to GAMA is the same as running Unity with GAMA. The only difference is the need to set the correct IP and build and export the application on the headset."}),"\n",(0,o.jsx)(n.p,{children:'Go to "Managers/Connection Manager" from the Scene and in the "Default IP" field, set the IP of the PC running GAMA (to replace "localhost"). Note that the headset and the PC must use the same WiFi network to work. Be sure as well that "Fixed Properties" is checked as it allows to use the IP defined in "Default IP".'}),"\n",(0,o.jsx)(n.p,{children:'In the File Menu, choose "Build Profiles".'}),"\n",(0,o.jsx)("img",{width:"1136",alt:"Capture d\u2019e\u0301cran 2025-12-16 a\u0300 14 42 16",src:"https://github.com/user-attachments/assets/c76b6ac6-7baa-4022-aef2-7baaf7725060"}),"\n",(0,o.jsx)(n.p,{children:'In this panel, select "Android" then click on "Switch platform".'}),"\n",(0,o.jsx)("img",{width:"793",alt:"Capture d\u2019\xe9cran 2025-12-16 \xe0 14 43 33",src:"https://github.com/user-attachments/assets/ea77b928-ce1e-483c-a100-4b6eb0296eb3"}),"\n",(0,o.jsx)(n.p,{children:'Click on "Open Scene List" to select the scenes that you want to export on the headset. For example, the scene "Scene/MainScene-tuto". If the Scene is not available, open the scene in Unity, then click on "Add Open Scenes".'}),"\n",(0,o.jsx)("img",{width:"837",alt:"Capture d\u2019e\u0301cran 2025-12-16 a\u0300 14 42 40",src:"https://github.com/user-attachments/assets/ab095509-999f-40aa-b0bd-65777323417d"}),"\n",(0,o.jsxs)(n.p,{children:['Then click on "Build and Run". You will need to select a file for the application. If your headset is not connected, a pop-up will appear. You will need to connect your headset and click on "Retry". To connect the headset, simply plug your headset to the computer using a USB-C cable and accept any authorization that appears. Note that the headset must be in "',(0,o.jsx)(n.a,{href:"https://knowledge.vr-expert.com/kb/how-to-activate-developer-mode-on-the-meta-quest-3/",children:"Developer Mode"}),'" to export the application to it.']}),"\n",(0,o.jsx)(n.p,{children:'Once the application is exported, it should start right on the headset if you have already set up a boundary. If you don\'t see the application running, just click on the "Meta" button on the right controller, quit the application, and run it again. To run the application, in the application panel of the headset, select applications from "Unknown source" and you should be able to find your application.'})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453(e,n,t){t.d(n,{R:()=>s,x:()=>r});var i=t(6540);const o={},a=i.createContext(o);function s(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);