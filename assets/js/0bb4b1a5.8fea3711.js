"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[7390],{9265:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>c,frontMatter:()=>s,metadata:()=>i,toc:()=>h});const i=JSON.parse('{"id":"Toolchain/Recipes/SendingDEM","title":"Sending a Digital Elevation Model (DEM) from GAMA","description":"**Link to the example model**: LinkToUnity/Models/Code Examples/Send DEM.gaml","source":"@site/docs/Toolchain/04-Recipes/07-SendingDEM.md","sourceDirName":"Toolchain/04-Recipes","slug":"/Toolchain/Recipes/SendingDEM","permalink":"/Toolchain/Recipes/SendingDEM","draft":false,"unlisted":false,"editUrl":"https://github.com/project-SIMPLE/documentation/tree/main/docs/Toolchain/04-Recipes/07-SendingDEM.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{},"sidebar":"docSidebar","previous":{"title":"Sending attribute values linked to agents/geometries from GAMA","permalink":"/Toolchain/Recipes/SendingAttributeValues"},"next":{"title":"Managing Water from GAMA","permalink":"/Toolchain/Recipes/ManagingWater"}}');var a=n(4848),r=n(8453);const s={},o="Sending a Digital Elevation Model (DEM) from GAMA",l={},h=[{value:"Step 1: Creating a new terrain",id:"step-1-creating-a-new-terrain",level:3},{value:"Step 2: Setting the new terrain",id:"step-2-setting-the-new-terrain",level:3},{value:"Step 3: Using the terrain for teleportation",id:"step-3-using-the-terrain-for-teleportation",level:3},{value:"Step 4: Updating the terrain from GAMA",id:"step-4-updating-the-terrain-from-gama",level:3}];function d(e){const t={a:"a",code:"code",em:"em",h1:"h1",h3:"h3",header:"header",img:"img",p:"p",pre:"pre",strong:"strong",...(0,r.RP)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"sending-a-digital-elevation-model-dem-from-gama",children:"Sending a Digital Elevation Model (DEM) from GAMA"})}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.em,{children:(0,a.jsx)(t.strong,{children:"Link to the example model"})}),": ",(0,a.jsx)(t.a,{href:"https://github.com/project-SIMPLE/simple.toolchain/blob/2024-06/GAMA%20Plugin/gaml.extension.unity/models/LinkToUnity/Models/Code%20Examples/Send%20DEM.gaml",children:"LinkToUnity/Models/Code Examples/Send DEM.gaml"})]}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.img,{src:"https://github.com/user-attachments/assets/ea54503b-5099-4484-984d-ffd5c6581a29",alt:"Vidoterrain-ezgif com-optimize"})}),"\n",(0,a.jsx)(t.p,{children:"The principle is to use a Terrain game object in Unity and sending/updating from GAMA its height map."}),"\n",(0,a.jsx)(t.h3,{id:"step-1-creating-a-new-terrain",children:"Step 1: Creating a new terrain"}),"\n",(0,a.jsx)(t.p,{children:"In the Scene, click on the right button to add a new 3D Object/Terrain."}),"\n",(0,a.jsx)("img",{width:"423",alt:"CreateNewTerrain",src:"https://github.com/user-attachments/assets/302697cf-31f0-4a6d-9017-a14245cddf72"}),"\n",(0,a.jsx)(t.h3,{id:"step-2-setting-the-new-terrain",children:"Step 2: Setting the new terrain"}),"\n",(0,a.jsxs)(t.p,{children:["A first element to set is the name of the Terrain that will be used as a ",(0,a.jsx)(t.em,{children:"id"})," from GAMA. To assign a particular material to the Terrain,  click on the terrain setting icon."]}),"\n",(0,a.jsx)("img",{width:"1249",alt:"Setup Terrain 1",src:"https://github.com/user-attachments/assets/e5b17c51-5e1f-46d2-aa01-f1de3fc2782e"}),"\n",(0,a.jsx)(t.p,{children:"Then, the material can be assigned in the corresponding field."}),"\n",(0,a.jsx)("img",{width:"693",alt:"Setup Terrain 2",src:"https://github.com/user-attachments/assets/819827eb-f358-424f-aa60-d187f41f6faa"}),"\n",(0,a.jsx)(t.p,{children:"It is also important to set the resolution of the height map. For rendering and performance issues, it is highly recommended to use a low resolution like 65x65."}),"\n",(0,a.jsx)("img",{width:"403",alt:"Setup Terrain 3",src:"https://github.com/user-attachments/assets/9e59a084-a888-4f71-8039-e545f156e0bc"}),"\n",(0,a.jsx)(t.h3,{id:"step-3-using-the-terrain-for-teleportation",children:"Step 3: Using the terrain for teleportation"}),"\n",(0,a.jsx)(t.p,{children:"To use the terrain for teleportation, first, remove the \xab\xa0Ground\xa0\xbb game object inside the Teleport Area (in the Scene). Then, add the terrain as a collider for the Teleportation area."}),"\n",(0,a.jsx)("img",{width:"1251",alt:"Terrain Teleportation",src:"https://github.com/user-attachments/assets/28aca3ac-3978-49d7-9f73-98a36d35ad9a"}),"\n",(0,a.jsx)(t.h3,{id:"step-4-updating-the-terrain-from-gama",children:"Step 4: Updating the terrain from GAMA"}),"\n",(0,a.jsx)(t.p,{children:"There are two ways to update the terrain values (height map) from GAMA that correspond to two actions of the Unity Linker agent. The first one can be used to setup all the value of the height map, and the second one is dedicated to update specific cells of the terrain."}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.strong,{children:"Updating all the values of the terrain\u2019s height map"}),'\nWe use for that the "update_terrain" action. The value of the height map can be either sent as a field or as a matrix. Note that for optimisation purposes, it is important to set the ',(0,a.jsx)(t.strong,{children:"max_values"})," as the maximal value can that be obtained during all the simulation."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'do update_terrain (\n\tplayer:last(unity_player),  //player concerned\n\tid:"Dem",  //name of the Terrain in Unity\n\tfield:f, //it is possible to send the grid either as a field or as a matrix\n\tresolution:65, //resolution of the target Terrain in Unity.\n     max_value:max_value //optional : max possible value of the grid\n);\n'})}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"Updating a subset of the values of the terrain\u2019s height map"})}),"\n",(0,a.jsx)(t.p,{children:'We use for that the "set_terrain_values" action. The principle is to give the new values for the cells as a matrix and the index of this "sub-matrix" according to the global height map matrix.'}),"\n",(0,a.jsx)("img",{width:"254",alt:"Terrain Update",src:"https://github.com/user-attachments/assets/f8ca7427-574a-4c07-a8e1-9a0164f16568"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-java",children:'do set_terrain_values(\n\tplayer:last(unity_player), //player concerned\n\tid:"Dem",  //name of the Terrain in Unity\n\tmatrix: {1,1} matrix_with c.grid_value, //matrix containing the new values\n\tindex_x : c.grid_x, //index x (column) of the matrix in the total grid\n\tindex_y : c.grid_y //index y (row) of the matrix in the total grid\n);\n'})})]})}function c(e={}){const{wrapper:t}={...(0,r.RP)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{RP:()=>r,xA:()=>o});var i=n(6540);const a=i.createContext({});function r(e){const t=i.useContext(a);return i.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}const s={};function o({components:e,children:t,disableParentContext:n}){let o;return o=n?"function"==typeof e?e({}):e||s:r(e),i.createElement(a.Provider,{value:o},t)}}}]);