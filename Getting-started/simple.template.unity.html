<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Getting-started/simple.template.unity" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Install Unity Template | SIMPLE project documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://avatars.githubusercontent.com/u/137744200"><meta data-rh="true" name="twitter:image" content="https://avatars.githubusercontent.com/u/137744200"><meta data-rh="true" property="og:url" content="https://doc.project-simple.eu/Getting-started/simple.template.unity"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Install Unity Template | SIMPLE project documentation"><meta data-rh="true" name="description" content="This project allows to adapt a GAMA simulation to a VR environment created with Unity. It provides the VR developer with a game and connection management system, including GameObjects, methods and events that can be hooked. A list of these elements and how to use them is provided in the Documentation section."><meta data-rh="true" property="og:description" content="This project allows to adapt a GAMA simulation to a VR environment created with Unity. It provides the VR developer with a game and connection management system, including GameObjects, methods and events that can be hooked. A list of these elements and how to use them is provided in the Documentation section."><link data-rh="true" rel="icon" href="https://avatars.githubusercontent.com/u/137744200"><link data-rh="true" rel="canonical" href="https://doc.project-simple.eu/Getting-started/simple.template.unity"><link data-rh="true" rel="alternate" href="https://doc.project-simple.eu/Getting-started/simple.template.unity" hreflang="en"><link data-rh="true" rel="alternate" href="https://doc.project-simple.eu/Getting-started/simple.template.unity" hreflang="x-default"><link rel="preconnect" href="https://doc-project-simple.goatcounter.com">
<script async src="//gc.zgo.at/count.js" data-goatcounter="https://doc-project-simple.goatcounter.com/count"></script>

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.4.2/css/all.css"><link rel="stylesheet" href="/assets/css/styles.c9ba2be5.css">
<script src="/assets/js/runtime~main.5275e93d.js" defer="defer"></script>
<script src="/assets/js/main.2d5fe621.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="https://avatars.githubusercontent.com/u/137744200" alt="SIMPLE Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="https://avatars.githubusercontent.com/u/137744200" alt="SIMPLE Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">SIMPLE documentation</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Documentation</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/project-SIMPLE" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><i class="fab fa-github" style="font-size: 24px;"></i></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Welcome</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/category/getting-started">Getting Started</a><button aria-label="Collapse sidebar category &#x27;Getting Started&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Getting-started/gaml.extension.unity">Install GAMA Plugin</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Getting-started/simple.template.unity">Install Unity Template</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/simple-sdk">SIMPLE SDK</a><button aria-label="Expand sidebar category &#x27;SIMPLE SDK&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/projects-tools">Projects tools</a><button aria-label="Expand sidebar category &#x27;Projects tools&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/demo">Demo</a><button aria-label="Expand sidebar category &#x27;Demo&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/category/getting-started"><span itemprop="name">Getting Started</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Install Unity Template</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>SIMPLE Unity Template</h1></header>
<p>This project allows to adapt a GAMA simulation to a VR environment created with Unity. It provides the VR developer with a game and connection management system, including GameObjects, methods and events that can be hooked. A list of these elements and how to use them is provided in the <a href="#documentation"><strong>Documentation</strong></a> section.</p>
<p>A description of the use of the template with a tutorial can be found <a href="https://github.com/project-SIMPLE/simple.toolchain/wiki/Tutorial-%E2%80%90-From-GAMA-model-to-Virtual-Universe-%E2%80%90-case-of-a-traffic-model" target="_blank" rel="noopener noreferrer">here</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation">​</a></h2>
<blockquote>
<p>[!WARNING]
The project is being developped using <strong>Unity Editor 2022.3.5f1</strong>. Although it should work with newer versions, as is doesn&#x27;t use any version-specific features (for now), it is strongly recommanded to use exactly the same Editor version.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h3>
<p>Once the project is opened in Unity, if you have any errors, you can check the following points:</p>
<ul>
<li>Make sure that <strong>Newtonsoft Json</strong> is installed. Normaly, <a href="https://github.com/project-SIMPLE/simple.toolchain/" target="_blank" rel="noopener noreferrer">cloning this repo</a> should ensure that it is installed. But if it&#x27;s not the case, follow the tutorial on this <a href="https://github.com/applejag/Newtonsoft.Json-for-Unity/wiki/Install-official-via-UPM" target="_blank" rel="noopener noreferrer">link</a>.</li>
<li>To work properly, we assume that you already have a compatible GAMA model. It is also highly recommended that you install <a href="https://github.com/project-SIMPLE/GamaServerMiddleware" target="_blank" rel="noopener noreferrer"><strong>Gama Server Middleware</strong></a> as well.</li>
</ul>
<blockquote>
<p>[!TIP]
<strong>For Windows users</strong>, make sure that the folder Assets/Plugins contains a .dll file called websocket-sharp. If not, download it from <a href="https://github.com/sta/websocket-sharp" target="_blank" rel="noopener noreferrer">this repo</a>. And place it in Assets/Plugins in your Unity project.</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-included">What is included<a href="#what-is-included" class="hash-link" aria-label="Direct link to What is included" title="Direct link to What is included">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="scenes">Scenes<a href="#scenes" class="hash-link" aria-label="Direct link to Scenes" title="Direct link to Scenes">​</a></h4>
<p>The project contains different scenes:</p>
<ul>
<li>Code Examples: Set of scenes illustrating some of the features of the SIMPLE tool. Works with GAMA models in the &quot;Code Examples&quot; folder of the GAMA plugin.<!-- -->
<ul>
<li>Limit Player Movement: Show how to limit the player movement in Unity from GAMA.</li>
<li>Receive DEM data: Show how to send a grid/matrix from GAMA to Unity and modify it on the fly.</li>
<li>Receive Dynamic Data: Show how to send dynamic geometries/agents from GAMA to Unity.</li>
<li>Receive Static Data: Show how to send static geometries/agents from GAMA to Unity.</li>
<li>Receive Water Data: Show how to send water data to Unity and modify it on the fly.</li>
<li>Send Receive Message: Show how to send and receive a message from Unity to GAMA.</li>
<li>User Interactions: Show how to define interaction in Unity from GAMA.</li>
</ul>
</li>
<li>Menu: A set of scenes with menus that can be manipulated via VR.<!-- -->
<ul>
<li>Startup Menu: Allows to load two Scenes - IP Menu and Main Scene. It allows as well to define if the middleware will be used or not. Using the middleware requires to run another software (the middleware), but allows to connect several players et to follow the connection status of the players.</li>
<li>IP Menu: Allows to change the IP used to connect to the computer running the middleware/GAMA</li>
<li>End of Game Menu : Displays information to the player and allows to restart the game.</li>
</ul>
</li>
<li>Demo: present a complete experience of game with interactions with GAMA.<!-- -->
<ul>
<li>Single Player Game: a simple game connected with GAMA where the player can move, select cars and motorbikes to remobe then, grab a tree, select a building bloc to define it as a hotspot (to attract cars and motorbikes).</li>
<li>Multi-Player Game: a multi-player game where each player has to collect treasures. The player that collect the highest number of treasures is the winner. The synchronization between the players is done through GAMA.</li>
</ul>
</li>
</ul>
<p>In addtion, two scene templates are provided to create new games:</p>
<ul>
<li>Main Scene - FPS player: define a basic scene with a FPS-type (First-Person) player</li>
<li>Main Scene - Sky View player: define a basic scene with a Sky View-type player</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources">​</a></h4>
<p>Composed of two types of elements:</p>
<ul>
<li>Materials: includes different materials, especially for water and terrain.</li>
<li>Prefabs: includes different prefabs:<!-- -->
<ul>
<li>GAMA Link: Prefabs dedicated to the connection with GAMA, in particular &quot;Connection Manager&quot; to manage the connection between Unity and GAMA, and &quot;Game Manager&quot; to manage the game and the messages sent to/from GAMA.</li>
<li>Player: Prefabs dedicated to the management of the VR player. It includes two types of players - FPS player, where the player walks on a ground and can teleport; Sky view player, where the player flies in the sky (no gravity) and can move horizontally and vertically.</li>
<li>Utils: contains a Debug overlay that will display all the elements display in the console (using the Debug.Log() method).</li>
<li>Visual Prefabs: contains a set of 3D assets that can be used for different purposes.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="quick-start">Quick Start<a href="#quick-start" class="hash-link" aria-label="Direct link to Quick Start" title="Direct link to Quick Start">​</a></h3>
<ol>
<li>Download the silmple.template.project (<a href="https://github.com/project-SIMPLE/simple.toolchain/archive/refs/heads/2024-06.zip" target="_blank" rel="noopener noreferrer">here</a>)</li>
<li>Import it as a Unity project. <strong>Make sure to use the right Editor version (Unity Editor 2022.3.5f1)</strong>.
<img decoding="async" loading="lazy" src="https://github.com/user-attachments/assets/58dfd971-b89a-44aa-aaf6-77767784a596" alt="qs-1" class="img_ev3q"></li>
<li>In the Menu &quot;File&quot; select &quot;Build Settings...&quot;</li>
</ol>
<img width="1027" alt="Build-setting_menu" src="https://github.com/user-attachments/assets/f8e5583d-c3f6-4e22-826b-c36cea979e52">
<ol start="4">
<li>Select &quot;Android&quot; in &quot;Platform&quot;, then click on &quot;Switch Platform&quot;. You can after build and deploy the application on the headset by clicking on &quot;Build and Run&quot;.</li>
</ol>
<img width="642" alt="Build-setting" src="https://github.com/user-attachments/assets/5fab90c2-c11d-4a5b-a5c8-c0503b2a413f">
<ol start="5">
<li>To run the application in conjunction with GAMA, make sure you have installed <a href="https://github.com/gama-platform/gama/releases/tag/2024.07.0" target="_blank" rel="noopener noreferrer">GAMA 2024.07</a> and the <a href="https://github.com/project-SIMPLE/simple.toolchain/tree/2024-06/GAMA%20Plugin" target="_blank" rel="noopener noreferrer">Unity Plugin for GAMA</a>. Information on installing the plugin is available <a href="https://github.com/project-SIMPLE/simple.toolchain/tree/2024-06/GAMA%20Plugin#installation" target="_blank" rel="noopener noreferrer">here</a>. The plugin provides a set of model (added in Plugin models/LinkToUnity) that works with the Unity project.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="documentation">Documentation<a href="#documentation" class="hash-link" aria-label="Direct link to Documentation" title="Direct link to Documentation">​</a></h2>
<p>This section focuses only on the C# scripts which are useful for a Unity developer. The scripts not mentioned here are at least commented.
<strong>Important note:</strong> As all the scripts which name finishes by &quot;Manager&quot; are instantiated when Unity is launched in the &quot;Managers&quot; GameObject, they are all developed using the Singleton Pattern. Hence trying to instantiate in some external scripts could break the default mechanisms. To call a method from one of these classes, one should rather use the following code snippet :</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">NameOfClassManager</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Instance</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">SomeMethod</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="websocketconnector">WebSocketConnector<a href="#websocketconnector" class="hash-link" aria-label="Direct link to WebSocketConnector" title="Direct link to WebSocketConnector">​</a></h3>
<p>Base abstract class to establish a web-socket connection with GAMA. All the methods of this class are private or protected. Hence they are only accessible through a child class (ConnectionManager here).
Theorically, in most cases, <strong>one mustn&#x27;t try to access the methods of this class</strong>, as they are alreay used/overriden by ConnectionManager.</p>
<p><strong>Abstract Methods:</strong></p>
<ul>
<li><code>HandleConnectionOpen</code> : triggered when a web-socket connection is established.</li>
<li><code>HandleReceivedMessage</code> : triggered when a message is received from the server.</li>
<li><code>HandleConnectionClosed</code> : triggered when the connection is closed, either by the server or by Unity itself.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="connectionmanager">ConnectionManager<a href="#connectionmanager" class="hash-link" aria-label="Direct link to ConnectionManager" title="Direct link to ConnectionManager">​</a></h3>
<p>This class extends WebSocketConnector and implements the methods mentioned above. The corresponding script is already in a GameObject called &quot;Connection Manager&quot;, which has to be integrated in the Main Scene.
It is in charge of creating an ID for the player once the connection with GAMA is established. Moreover, it provides the Unity developer with a state machine implemented as an <code>enum</code> to handle each stage of the connection process. The specific role of each state is explained in the script source code. Some useful events allow the developer to to handle connection transitions and informations.</p>
<p><strong>Events:</strong></p>
<ul>
<li><code>OnConnectionStateChange&lt;ConnectionState newState&gt;</code> : Triggered when a transition from one connection state from another occurs.</li>
<li><code>OnConnectiontStateReceived&lt;JObject payload&gt;</code> : Triggered when Unity receives a Json message from the server, which &quot;type&quot; field holds &quot;json_state&quot;. For further informations about the payload detail, please refer to GamaServerMiddleware documentation</li>
<li><code>OnConnectionAttempted&lt;boolean connectionSuccess&gt;</code> : Triggered when a Json object with type &quot;json_state&quot; is received from the server, after Unity attempted to connect to it using <code>TryConnectionToServer</code> method. The boolean <code>connectionSuccess</code> contains true if the connection was successfully established, false otherwise.</li>
<li><code>OnServerMessageReceived</code> : Triggered when Unity receives a Json message from the server, which &quot;type&quot; field holds &quot;json_simulation&quot;. For further informations about the payload detail, please refer to GamaServerMiddleware documentation.</li>
</ul>
<p><strong>Methods:</strong></p>
<ul>
<li><code>UpdateConnectionState(ConnectionState newState)</code> : Changes the current connection state to <code>newState</code>. Calling this method should be avoided whenever possible, as it could break the default connection process, leading to some undefined state.</li>
<li><code>TryConnectionToServer</code> : Attemps a connection to the middleware or to GAMA</li>
<li><code>IsConnectionState(ConnectionState currentState)</code> : Checks current state.</li>
<li><code>SendExecutableExpression(string expression)</code> : Allows to send an expression to GAMA through the middleware or directlty to GAMA. The expression is compiled and executed in the experiment context. <!-- -->⚠️<!-- --> Beware of the arguments expected by GAMA and special characters required by GAMA (such as <code>;</code>, <code>&quot;</code>, ...) as the expression is executed as it is sent by Unity.</li>
<li><code>SendExecutableAsk(string action, Dictionary&lt;string,string&gt; arguments)</code> : Allows you to ask one of the  agents of the simulation to trigger an action (defined by its name), the second argument represents the values of the action arguments given by a dictionary (key: name of the argument, value: value of the argument). <!-- -->⚠️<!-- --> unlike SendExecutableExpression, the expression is not compiled, which is less time-consuming for GAMA, but only allows you to send simple values for the action&#x27;s argument values and not complex expressions.</li>
<li><code>GetConnectionId</code> : Returns the ID created by Unity when the connection was established. This one is based on the IP of the headset.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="simulationmanager">SimulationManager<a href="#simulationmanager" class="hash-link" aria-label="Direct link to SimulationManager" title="Direct link to SimulationManager">​</a></h3>
<p>This is the core script of this package. It allows to manage the actions triggered by the messages received by GAMA.</p>
<p><strong>Events</strong>:</p>
<ul>
<li><code>OnGameStateChanged&lt;GameState newGameState&gt;</code> : Triggered when a transition from one GameState to another occurs.</li>
<li><code>OnGameRestarted</code> : Triggered when the function <code>RestartGame</code> is called.</li>
<li><code>OnGeometriesInitialized&lt;GAMAGeometry geometries&gt;</code> : Triggered when the initial geometries sent by GAMA are converted into polygons in the Unity scene. By default, <code>OnGameStateChanged</code> is triggered just after this event, to switch from the LOADING_DATA state to the GAME state. Hooking to this event allows to seperate the logic between the game state transition and the loading of geometries.
<!-- -->⚠️<!-- --> This event is called when incoming geometric data is successfully managed and NOT when it is received.</li>
</ul>
<p><strong>Methods</strong>:</p>
<ul>
<li><code>void UpdateGameState(GameState newState)</code> : Changes the current game state to <code>newState</code>. This method must be used with caution, as it could break the default game logic, leading to errors in the execution of crucial steps such as initialization or connection steps.</li>
<li><code>GameState GetCurrentState</code> : Returns the current game state</li>
<li><code>bool IsGameState(GameState state)</code> : Compares the current game state with the one specified as a parameter.</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/project-SIMPLE/documentation/tree/main/docs/Getting-started/simple.template.unity.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Getting-started/gaml.extension.unity"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Install GAMA Plugin</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/category/simple-sdk"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">SIMPLE SDK</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a><ul><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#what-is-included" class="table-of-contents__link toc-highlight">What is included</a></li><li><a href="#quick-start" class="table-of-contents__link toc-highlight">Quick Start</a></li></ul></li><li><a href="#documentation" class="table-of-contents__link toc-highlight">Documentation</a><ul><li><a href="#websocketconnector" class="table-of-contents__link toc-highlight">WebSocketConnector</a></li><li><a href="#connectionmanager" class="table-of-contents__link toc-highlight">ConnectionManager</a></li><li><a href="#simulationmanager" class="table-of-contents__link toc-highlight">SimulationManager</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Sponsor</div><ul class="footer__items clean-list"><li class="footer__item">
                    <p>
                      This SIMPLE website was created and maintained with the financial support of the European Union. Its contents are the sole responsibility of SIMPLE and do not necessarily reflect the views of the European Union.
                    </p>
                  </li><li class="footer__item">
                    <img src="/img/EU_POS.png">
                  </li></ul></div><div class="col footer__col"><div class="footer__title">Licence</div><ul class="footer__items clean-list"><li class="footer__item">
                    <p>
                      Permission is granted to copy, distribute and/or modify this document under the terms of the GNU Free Documentation License, Version 1.3 or any later version published by the Free Software Foundation; with no Invariant Sections, no Front-Cover Texts, and no Back-Cover Texts.
                    </p>
                  </li><li class="footer__item">
                    <p>A copy of the license is included <a href="https://github.com/project-SIMPLE/documentation/blob/main/LICENSE" style="display:initial">here</a>, in the repository of the wiki content.</p>
                  </li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Project SIMPLE, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>